{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-07T09:11:36.794Z",
  "summary": "REQ-15 and REQ-16 appear implemented: StoryboardPreview now calls the createVideoJob mutation and uses the returned backend jobId; backend VideoJob now persists `prompt` and the UI displays `job.prompt` across Dashboard/Gallery. REQ-17 is not evidenced in the backend diff: there is no owner-callable start-generation API, no persisted/computed progress derived from a start timestamp, and completion still appears admin-only via `completeVideoJob`. REQ-18 is partially met on the frontend (GenerationRunner polls getVideoJob and uses backend status/resultUrl), but without REQ-17 the end-to-end backend-driven lifecycle is not demonstrably functional.",
  "missing_requirements": [
    {
      "id": "REQ-17",
      "requirement": "Implement a backend-driven simulated generation lifecycle for video jobs (owner can start; progress/status derived from persisted job state; auto-complete with non-null resultUrl; no admin-only completion required for normal flow).",
      "reason": "The diff shows `createVideoJob` and an admin-only `completeVideoJob`, but does not show any new owner-callable start-generation API, any start timestamp stored/used for progress, or logic that transitions a job to `#completed` with a placeholder `resultUrl` without admin intervention. The `getVideoJob` implementation is truncated and provides no evidence of progress simulation or status transitions.",
      "evidence": [
        "backend/main.mo"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Added a migration module to transform stored jobs from `title` to `prompt` and wired migration into the actor.",
      "reason": "Schema migration was not explicitly requested in REQ-15–REQ-18 (though it may be a reasonable implementation detail).",
      "evidence": [
        "backend/migration.mo",
        "backend/main.mo"
      ]
    },
    {
      "description": "Added/changed share-link clipboard utility and multiple toast messages for download/share actions across Dashboard/Gallery components.",
      "reason": "REQ-18 mentions share link remains copyable in English for GenerationRunner, but these additional UI changes across other areas (Dashboard/Gallery) were not explicitly requested by REQ-15–REQ-18.",
      "evidence": [
        "frontend/src/utils/share.ts",
        "frontend/src/components/dashboard/JobDetailModal.tsx",
        "frontend/src/components/dashboard/JobHistoryList.tsx",
        "frontend/src/components/gallery/GalleryPreviewModal.tsx"
      ]
    }
  ],
  "confidence": 0.74,
  "changed_files": [
    "backend/main.mo",
    "backend/migration.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/dashboard/JobDetailModal.tsx",
    "frontend/src/components/dashboard/JobHistoryList.tsx",
    "frontend/src/components/gallery/GalleryGrid.tsx",
    "frontend/src/components/gallery/GalleryPreviewModal.tsx",
    "frontend/src/components/generate/GenerationRunner.tsx",
    "frontend/src/components/generate/StoryboardPreview.tsx",
    "frontend/src/hooks/useVideoJobs.ts",
    "frontend/src/utils/share.ts",
    "project_state.json"
  ]
}